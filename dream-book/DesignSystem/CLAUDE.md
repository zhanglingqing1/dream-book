# DesignSystem/
> L2 | 父级: /dream-book/CLAUDE.md

成员清单
DesignSystemProtocol.swift: 设计系统色值常量与语义色基线，作为视觉真相源。
DesignTokens.swift: 视觉令牌层（颜色、排版、间距、圆角、阴影、组件背景），统一消费双模式色值。
DreamBookFoundation.swift: 梦之书基础层，承载颜色/排版/几何/阴影/基础容器组件令牌真相源。
DreamCardKit.swift: 梦境卡片数据契约与布局令牌层，统一定义列表/详情的数据结构、时间格式与回退策略。
DreamCardComponents.swift: 梦境卡片组件层，封装 Hero 叠层、时间轴列表、Page Sheet 详情与底部操作条。
DesignSystemPreview.swift: 设计系统预览总入口，当前挂载梦之书 Foundation 分区页并承接后续模块演进。
Preview/: 设计系统预览页面层与原子组件层。

架构决策（系统性修复原则）
1. 设计系统修复优先改“规则归属”而非单点数值：先确定 Foundation 令牌、模块布局令牌、组件实现的职责边界，再调 spacing。
2. `DreamBookFoundation.swift` 负责语义级规范（文字角色、边距、节奏、阴影语言）；`DreamCardKit.swift` 负责梦境卡片数据契约与构图几何；`DreamCardComponents.swift` 只消费令牌与实现布局。
3. 禁止补丁式改动：发现重叠、遮挡、空白异常时，不直接堆叠新的 `padding/offset`，应先追溯到令牌来源与布局约束模型。
4. 版式问题优先通过统一令牌接管解决：`DreamLayoutInsets` / `DreamLayoutRhythm` 是模板层 spacing 的默认入口，避免组件内散落硬编码间距。
5. 固定值仅用于构图几何（尺寸/旋转/偏移）；与内容长度、设备安全区相关的留白应使用语义规则或派生值，避免遮挡回归。

开发规范（版式与验收）
1. 调整列表/详情模板时，先检查是否复用 Foundation 排版规范；若未复用，优先做"令牌接管"再做视觉微调。
2. 任何新模板必须声明：页面边距、区块节奏、卡片内边距、底部安全预留的令牌来源。
3. 验收时区分风格与版式：本模块允许在不改风格（颜色/材质/阴影/圆角）的前提下，单独迭代边距、对齐、节奏与安全区。
4. 出现列表文本区空白过大、详情底部遮挡等问题时，视为系统性版式缺陷，不以局部补丁 closure 作为最终方案。

版式复刻记录（参考截图对齐）
1. 日期列保持 HStack 主结构，并将日号降重降尺（月号上标化）；timelineColumnWidth 74→62，形成更轻盈的时间刻度。
2. 浮层分析卡片尺寸统一：列表/详情/有图/无图全部复用同一宽度（insightCardWidth），消除双规格分叉。
3. 分析卡片文本体系整体降级：标题/副标题/指标字号全部下调，主指标值 31→24；分隔线改为“主线粗深 + 行线细浅”。
4. 分析卡片材质改为暖纸色（paperCard），并使用弱外描边 + 更弱内描边，替代高对比纯白硬边。
5. Summary Panel 正文区移除 sceneTag 胶囊，仅保留 emoji+叙述文本；增大正文行距并弱化颜色，提升段落阅读感。
6. 列表 Hero 区新增层级交互：点击图片/分析卡片可切换置顶，横向滑动可在两者之间切换，默认分析卡片在上层。
7. 层级切换增加景深动画：后层缩放+下沉+微旋转，滑动中附加轻视差，切换后使用弹簧回弹，保证交互质感。
8. 媒体源新增 `none` 状态：当无图时仅保留分析卡片叠层，同时保留有图与无图两种列表模板验收路径。
9. Hero 复刻尺寸关系：图片卡尺寸显著大于分析卡（图 > 分析卡），分析卡再缩一圈并保持统一尺寸；两张上层卡无论前后顺序都始终压在文字卡之上。
10. Hero 占位视觉去噪：移除无意义双白点，仅保留底部“梦境影像”文案，避免装饰噪音抢夺注意力。
11. Hero 叠层由“右侧贴边”改为“簇居中”模型：以几何中心定位图片卡与分析卡，左右留白趋于对称，构图重心回到文字卡中轴。
12. 时间轨道重平衡：缩小列表左侧安全边距、收窄日期列并压缩轨道与内容间距，将“日期 + 叠层 + 文本卡”整行重心左移，避免整体偏右。

法则: 成员完整·一行一文件·父级链接·技术词前置

[PROTOCOL]: 变更时更新此头部，然后检查 CLAUDE.md
