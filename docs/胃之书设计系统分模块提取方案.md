# 胃之书设计系统分模块提取方案（V1）

## 1. 目标

从上传截图反向提取可复用设计系统，不做“像就行”的静态抄图，而是建立：
- 可复用令牌（颜色/排版/间距/圆角/阴影）
- 可复用组件（卡片/导航/按钮/图表/列表）
- 可复用页面骨架（首页/数据/礼物/护照/识别）

结果要求：后续任何页面都通过令牌 + 组件组合产生，不再硬编码视觉值。

## 2. 证据样本拆解（按截图）

1. `识别页`：彩虹霓虹图像边框、巨大胶囊输入框、灰背景、三段底部操作区（返回/后台分析/分析中）。
2. `账号页`：毛玻璃封面 + 头像悬浮、分组设置卡片、长列表行、轻边框 + 软阴影。
3. `护照页`：黑白颗粒卡（FOOD PASSPORT）、地图卡、菜系卡、底部 Dock + 独立 FAB。
4. `礼物页`：排行榜卡（头像 + 标签 + 数值）、多色堆叠柱图卡、底部 Dock 激活态。
5. `数据页`：周历行、三色气泡图、空状态卡。
6. `首页`：近期解锁皮革纹理小卡、近期饮食大卡叠层（图片 + 营养卡 + 文本信息）。
7. `全局共性`：浅灰主画布、深灰 FAB、米灰 Premium 胶囊、中文衬线标题、弱对比边线。

## 3. 分模块提取蓝图

### M0 Foundation（令牌层）
- `Color`: 中性背景层、文本层、功能色、图片高光渐变色。
- `Typography`: 导航标题、分区标题、卡片标题、正文、注释、数字度量。
- `Spacing/Radius/Stroke`: 统一几何系统（所有卡片与胶囊共用）。
- `Shadow`: 卡片双层软阴影、Dock 阴影、FAB 阴影。

产出文件：`DesignSystem/BellyBookFoundation.swift`

### M1 Surface Primitive（容器原语）
- 卡片容器 `BBSurfaceCard`
- 底部 Dock 底板 `BBDockPlate`
- Premium 胶囊 `BBPremiumPill`
- 主行动按钮 `BBFloatingPlusButton`
- 霓虹照片框 `BBNeonPhotoFrame`

产出文件：`DesignSystem/BellyBookFoundation.swift`

### M2 Navigation + Controls（导航与控件）
- 顶部栏（头像 + 居中标题 + Premium）
- 底部 Dock（4 图标 + 激活态底板）
- 胶囊按钮状态（normal/pressed/disabled/loading）

产出目标文件：`DesignSystem/Preview/BellyBookControlsPreview.swift`（下一阶段）

### M3 Content Cards（内容卡片族）
- 排行榜项、设置行、地图卡、皮革卡、时间轴餐饮卡、空状态卡
- 统一卡片内边距/分割线/文本层级

产出目标文件：`DesignSystem/Preview/BellyBookCardLibraryPreview.swift`（下一阶段）

### M4 Data Visualization（数据可视化）
- 三色气泡图语义映射（仅图表系列，不绑定业务字段命名）
- 堆叠柱图配色与图例约束
- 数值字体与单位拼接规范（如 `0g` / `320 cal`）

产出目标文件：`DesignSystem/Preview/BellyBookDataVizPreview.swift`（下一阶段）

### M5 Page Templates（页面骨架）
- 首页、数据、礼物、护照、账号、识别 六大模板
- 模板只消费组件，不新增视觉分支

产出目标文件：`DesignSystem/Preview/BellyBookPageTemplatesPreview.swift`（下一阶段）

## 4. 本轮已开始的实现

- 已建立 M0 + M1 基础层：`BellyBookFoundation.swift`
- 已建立可视化验收页：`BellyBookFoundationPreview.swift`
- 已将设计系统入口切换到胃之书基础层预览

## 5. 下一步执行顺序（建议）

1. 完成 M2：把截图中的顶部栏、底部 Dock、按钮状态做成可复用组件。
2. 完成 M3：先落地“设置列表卡 + 排行榜卡 + 近期饮食叠层卡”三大高频卡片。
3. 完成 M4：做气泡图与堆叠柱图组件，补齐数据页/礼物页复刻能力。
4. 完成 M5：按页面模板拼装，进入 1:1 差异对照修正。

## 6. 当前坏味道与修复建议

- 坏味道：现有项目同时存在旧 `AppColor/AppTypography` 与新 `BB*` 两套令牌，真相源分裂。
- 风险：后续页面可能继续混用，导致视觉漂移与维护成本上升。
- 建议：在 M2 开始前执行一次“令牌收敛”，把旧预览文件迁移到 `BB*` 或归档到 legacy 目录。
